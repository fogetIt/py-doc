##### __len__() -> `string, list, tuple, set, dict`对象中元素个数
- 修改类对象的元素长度
- instance.__len__() == len(instance)
    + len(object) -> integer
    + len(decimal) -> Error

|method       |作用                            |example     |
|:------------|:------------------------------|:-----------|
|__getitem__()|支持索引（下标）查询               |print seq[i]|
|             |支持`for`循环迭代（缺少`__iter__`）|            |
|__setitem__()|支持索引（下标）赋值               |seq[i] = val|
|__delitem__()|支持索引（下标）删除               |del seq[i]  |

##### __iter__ -> 一个`迭代对象`
- 不断调用该`迭代对象`的 next()/__next__() 拿到循环的下一个值
- 直到`next()/__next__()`中`raise StopIteration()`时退出循环

##### with
- 方便处理一些事先需要设置，事后做清理工作的场景
- __enter__() -> context_object
    + 在进入代码块前被`with`调用
    + `必须`返回一个可供上下文使用的对象，赋值给`as`后面的变量
- __exit__(error_type, error_msg, trace_info)
    + 在离开代码块之后（异常、退出）被调用
        * 清理被使用的资源
            - 清理资源，关闭文件等等操作
        * 异常抛出时，与之关联的异常信息传给`__exit__()`

##### __new__()
- 用来创建实例
- 在`__init__()`之前调用
- 继承自`object`的新式类才有`__new__`
- `__new__`至少要有一个参数`cls`，代表要实例化的类
    + `cls`在实例化时由解释器自动提供
- 必须要有返回值（`cls`的实例），否则`__init__()`将不会被调用
- 在进行初始化之前，检查缓存中是否存在该对象
    + 如果存在则将缓存存放对象直接返回
    + 如果不存在，则将对象放至缓存中，供下次使用

##### __init__()
- 构造函数，可以接收实例成员变量（实例化时接收传参）
- 在实例化之后执行
- 不能`return`
- 子类可以不重写`__init__`，实例化子类时，会自动调用超类中的`__init__`
- 如果重写了`__init__`，实例化子类时，不会隐式的再去调用超类中的`__init__`
- 多继承，需要重写`__init__`（默认调用第一个存在的父类的`__init__`）

##### __getattr__(attr)
- 当属性不能在实例`__dict__`或它的类的`__dict__`或者祖先类的`__dict__`中找到时，才调用
- 支持`obj.attr, getattr(obj, attr), hasattr(obj, attr)`
    + hasattr(object, name) -> bool
        * 判断对象的属性
    + getattr(object, name[, default]) -> value
        * 获对象的属性值，如果不存在，返回指定的提示字符串
        * 只有在不知道对象信息的时候，才会去获取对象信息
    + delattr(object, name) == del object.name
        * 删除对象的属性
        * `object`是实例时，不能用来删除类属性
    + setattr(object, name, value)
        * 设置对象的属性值，如果属性不存在，自动创建并赋值
- 在没有找到属性的情况下，自动调用`__getattr__(attr)`

##### __del__()
- 析构函数
- 对象被销毁的时候执行，用来将对象所占用的内存资源释放给操作系统
    + `del obj`不表示调用了`obj.__del__()`，它仅仅是减少了引用计数
    + `__del__()`只能被调用一次，一旦引用计数为 0，对象就被清除
    + 程序执行完毕时，会自动销毁程序中的对象
    + 循环引用或其它原因，让一个实例的引用逗留不去，该对象的`__del__()`可能永远不会被执行
- e.g.
    ```python
    class Hello:
        # 使用一个静态成员来记录实例的个数，进行跟踪
        instance_count = 0

        def __init__(self):
            Hello.instance_count += 1

        def __del__(self):
            # 不要忘记调用父类的__del__()
            super(Hello, self).__del__()
            Hello.instance_count -= 1
            print "del instance"

    hello1 = Hello()
    hello2 = Hello()
    del hello1
    print 123
    ```

|magic methods                    |含义                      |
|:--------------------------------|:------------------------|
|__init__(self[, *args, **kwargs])|构造器                    |
|__new__(self[, *args, **kwargs]) |构造器，通常用在设置不变数据类|
|__del__(self)                    |解构器                    |
|                                 |                         |
|__str__(self)                    |`str()`及`print`语句      |
|__repr__(self)                   |`repr()`和''             |
|__unicode__(self)                |`unicode()`              |
|__call__(self, *args, **kwargs)  |`callable()`             |
|__nonzero__(self)                |`bool()`                 |
|__len__(self)                    |`len()`                  |
|                                 |                         |
|__cmp__(self, obj)               |`cmp()`                  |
|__add__(self)                    |`+`                      |
|__iadd__(self)                   |`+=`                     |
|__sub__(self, obj)               |`-`                      |
|__mul__(self, obj)               |`*`                      |
|__div__(self, obj)               |`/`                      |
|__truediv__(self, obj)           |`/`                      |
|__floordiv__(self, obj)          |`//`                     |
|__mod__(self, obj)               |`%`                      |
|__divmod__(self, obj)            |`divmod()`               |
|__pow__(self, obj[, mod])        |`pow(), **`              |
|                                 |                         |
|__lshift__(self, obj)            |`<<`                     |
|__rshift__(self, obj)            |`>>`                     |
|__and__(self, obj)               |`&`                      |
|__or__(self, obj)                |`竖线`                    |
|__xor__(self, obj)               |`^`                      |
|__invert__(self)                 |`~`                      |
|                                 |                         |
|__complex__(self, com)           |`complex()`              |
|__int__(self)                    |`int()`                  |
|__long__(self)                   |`long()`                 |
|__float__(self)                  |`float()`                |
|                                 |                         |
|__oct__(self)                    |`oct()`                  |
|__hex__(self)                    |`hex()`                  |
|                                 |                         |
|__coerce__(self, num)            |`coerce()`               |
|__index__(self)                  |                         |
|                                 |                         |
|__getslice__(self, ind1,ind2)    |得到序列片断               |
|__setslice__(self, i1, i2,val)   |设置序列片断               |
|__delslice__(self, ind1,ind2)    |删除序列片断               |
|__contains__(self, val)          |`in`                     |
|                                 |                         |
|__hash__(self)                   |散列函数值                |
|                                 |                         |
|__missing__(self,key)            |字典中默认值               |
|                                 |                         |
|__neg__(self)                    |一元负                    |
|__pos__(self)                    |一元正                    |
|__abs__(self)                    |`abs()`                  |
|                                 |                         |
|__lt__(self, obj)                |`</<=`                   |
|__gt__(self, obj)                |`>/>=`                   |
|__eq__(self, obj)                |`==/!=/<>`               |
|                                 |                         |
|__getattr__(self, attr)          |`getattr()`              |
|                                 |仅当属性没有找到时调用      |
|__getattribute__(self, attr)     |`getattr()`              |
|                                 |总是被调用                |
|__setattr__(self, attr, val)     |`setattr()`              |
|__delattr__(self, attr)          |`delattr()`              |
|                                 |                         |
|__get__(self, attr)              |(描述符)获取属性           |
|__set__(self, attr, val)         |(描述符)设置属性           |
|__delete__(self, attr)           |(描述符)删除属性           |
